$(function(){var e=$(window).height();$("#wrap").css("display","none"),$("#loader-bg ,#loader").height(e).css("display","block")}),$(window).ready(function(){$("#loader-bg").delay(900).fadeOut(800),$("#loader").delay(600).fadeOut(300),$("#wrap").css("display","block")}),$.ajaxSetup({beforeSend:function(e){e.overrideMimeType&&e.overrideMimeType("application/json")}}),$(function(){function e(e){"use strict";document.querySelector("#snackbar").MaterialSnackbar.showSnackbar({message:e,timeout:2e3})}function t(e){for(var t=window.location.search.substring(1).split("?"),a=0;a<t.length;a++){var i=t[a].split("=");if(i[0]==e)return i[1]=decodeURI(i[1]),i[1]}}function i(e,a){if(t(e)!=a){var i=new RegExp("[?]"+e+"[^?]*","g");if(""!=a)var n="?"+e+"="+a;else var n="";window.history.pushState("page",a,window.location.href.replace(i,"")+n)}}function n(e){if(1==e)var t=$.map(a,function(e,t){return t}).length;else var t=Object.keys(Cookies.get()).length;$('.mdl-navigation__link:contains("お気に入り") > span').attr("data-badge",t)}function r(t,a){$.getJSON("./data/cards.json").done(function(i){var r=[],o=[];""!=a?(r=i,o=$.map(r,function(e,t){var i=new RegExp(a,"gi"),n=$.map(r[t].tabs||{},function(e,t){return[e]});if((((r[t].title||"")+(r[t].text||"")+(n.join(",")||"")+(r[t].orgName||"")+(r[t].orgId||"")).replace(/<("[^"]*"|'[^']*'|[^'">])*>/g,"").match(i)||[]).length>0)return t})):(r=$.each(i,function(e,a){if(e.category==t)return e}),o="お気に入り"==t?$.map(Cookies.get(),function(e,t){if("true"==e)return t.replace("card-","")}):$.map(r,function(e,a){if(e.category==t)return a})),o.sort(naturalSort),$(".mdl-grid").fadeOut("fast",function(){$(this).empty(),0==o.length?($(".mdl-grid").css("display",""),$("main").unhighlight(),""!=a&&$(".mdl-layout__header-row > .mdl-textfield").addClass("is-invalid")):($.map(o,function(e,t){var a=r[e];$(".mdl-grid").append($.render.cardTmpl(a)).hide().fadeIn("fast")}),$("main .mdl-card__supporting-text,main .mdl-tabs__panel .mdl-card__supporting-text,main .mdl-card__title-text").highlight(a||""),$(".mdl-layout__header-row > .mdl-textfield").removeClass("is-invalid")),$('button:contains("star_border")').each(function(){"true"==Cookies.get($(this).parents(".mdl-card").attr("id"))&&$(this).find(".material-icons").text("star")}),$("button").click(function(){if("star_border"==$(this).find(".material-icons").text())$(this).find(".material-icons").text("star"),Cookies.set($(this).parents(".mdl-card").attr("id"),!0,{expires:365}),n(!1),e("お気に入りに追加しました");else if("star"==$(this).find(".material-icons").text()){$(this).find(".material-icons").text("star_border");var a=$(this).parents(".mdl-card").attr("id");Cookies.remove(a),"お気に入り"==t&&$("#"+a).fadeOut("fast",function(){}),n(!1),e("お気に入りから削除しました")}}),$("a[href='#panel-0'],#panel-0").each(function(){$(this).addClass("is-active")}),componentHandler.upgradeDom()})})}function o(e){$(".mdl-layout__header-row > .mdl-navigation").html($("#header").render(e)),$(".mdl-layout__drawer > .mdl-navigation").html($("#drawer").render(e)),$(".mdl-mini-footer__left-section > .mdl-mini-footer__link-list").html($("#footer").render(e)),$("main").append($("#tooltip").render(e)),$('<span class="mdl-badge">').appendTo('.mdl-navigation__link:contains("お気に入り")'),n(!1)}function d(){$("#mdl-drawer").removeClass("is-visible"),$(".mdl-layout__obfuscator").removeClass("is-visible"),$("#mdl-drawer").attr("aria-hidden","true")}setTimeout(function(){$("#wrap").css("display","block"),$("#loader-bg").delay(900).fadeOut(800),$("#loader").delay(600).fadeOut(300),e("このWEBサイトはCookieを使用します")},5e3);var l=decodeURI(t("c")||"ホーム"),s=decodeURI(t("n")||""),c=decodeURI(t("q")||"");$("#search").val(c),$.getJSON("./data/ui.json").done(function(e){o(e),$(".button").click(function(){d(),l=this.id,s="",c="",$(".mdl-layout__header-row > .mdl-textfield").removeClass("is-invalid is-focused is-dirty"),$("#search").val(""),$("#search").blur(),r(this.id,c),i("c",this.id)})}),$.templates("cardTmpl",{markup:"#card",allowCode:!0}),r(l,c),$("#search").change(function(){c=this.value,r(l,this.value),$("#search").blur(),i("q",this.value)}),$(".layout-transparent").css("background","url('./images/8350.jpg') center / cover"),$("#toPageTop").click(function(){$("main").animate({scrollTop:0},"fast")}),$("#drawer-close").click(function(){d()})});